{namespace terfe2=Tx_TerFe2_ViewHelpers}

<f:layout name="Default" />

<f:section name="main">
	<h2><f:translate key="single_extension"/></h2>

	<!-- Extension details -->
	<div class="extension">
		<h3>
			<span class="icon">
				<terfe2:extensionIcon version="{extension.lastVersion}" alt="{extension.lastVersion.title}" />
			</span>
			{extension.lastVersion.title} ({extension.extKey})
		</h3>
		<p class="description">
			{extension.lastVersion.description}
		</p>
		<p class="categories">
			<f:for each="{extension.categories}" as="{category}">{category.title}</f:for>
		</p>
		<p class="tags">
			<f:for each="{extension.tags}" as="tag" iteration="tagIterator">{tag.title}{f:if(condition:tagIterator.isLast,then:'',else:', ')}</f:for><br />
			<f:link.action controller="Tag" action="new" arguments="{extension : extension}"><f:translate key="create_tag" /></f:link.action>
		</p>
		<f:if condition="{extension.forgeLink}">
			<p class="forgeLink">
				<f:link.external uri="{extension.forgeLink}"><f:translate key="tx_terfe2_domain_model_extension.forge_link" /></f:link.external>
			</p>
		</f:if>
		<f:if condition="{extension.hudsonLink}">
			<p class="hudsonLink">
				<f:link.external uri="{extension.hudsonLink}"><f:translate key="tx_terfe2_domain_model_extension.hudson_link" /></f:link.external>
			</p>
		</f:if>
		<div class="chart">
			<terfe2:chart object="{extension}" method="downloadsByVersion" title="{f:translate(key: 'downloads_by_version')}" height="200" width="300" />
		</div>
	</div>

	<!-- Downloads & manual -->
	<div class="extension_downloads">
		<ul>
			<li><f:link.action controller="Extension" action="download" arguments="{version : extension.lastVersion}"><f:translate key="download_t3x"/></f:link.action></li>
			<f:if condition="{extension.lastVersion.zipFile}">
				<li><f:link.action controller="Extension" action="download" arguments="{version : extension.lastVersion, format : 'zip'}"><f:translate key="download_zip"/></f:link.action></li>
			</f:if>
			<li><f:translate key="read_manual"/>: <terfe2:documentationLink version="{extension.lastVersion}" /></li>
		</ul>
	</div>

	<!-- Links -->
	<div class="extension_links">
		<ul>
			<li><f:link.action controller="Extension" action="edit" arguments="{extension : extension}"><f:translate key="edit"/></f:link.action></li>
			<li><f:link.action controller="Extension" action="index"><f:translate key="back_to_list"/></f:link.action></li>
		</ul>
	</div>
</f:section>